<div class="container my-5">
  <div class="row">
    <div class="col-lg-8 mx-auto">
      <h1 class="mb-4">My Profile</h1>
      
      @if (loading) {
        <div class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      } @else if (error) {
        <div class="alert alert-danger" role="alert">
          <i class="bi bi-exclamation-triangle me-2"></i>
          {{ error }}
        </div>
      } @else if (userProfile) {
        <div class="card">
          <div class="card-body">
            <div class="mb-4">
              <h5>Account Information</h5>
              <p class="mb-1"><strong>Name:</strong> {{ userProfile.firstName }} {{ userProfile.lastName }}</p>
              <p class="mb-1"><strong>Email:</strong> {{ userProfile.email }}</p>
              <p class="mb-1"><strong>Role:</strong> <span class="badge bg-secondary">{{ userProfile.role }}</span></p>
            </div>

            <hr>

            <h5 class="mb-3">Update Profile</h5>
            <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
              <div class="mb-3">
                <label for="phoneNumber" class="form-label">Phone Number</label>
                <input
                  type="tel"
                  class="form-control"
                  id="phoneNumber"
                  formControlName="phoneNumber"
                  placeholder="Enter phone number"
                >
              </div>

              <div class="mb-3">
                <label for="notificationPreference" class="form-label">Notification Preference</label>
                <select
                  class="form-select"
                  id="notificationPreference"
                  formControlName="notificationPreference"
                >
                  <option value="email">Email</option>
                  <option value="sms">SMS</option>
                  <option value="both">Both</option>
                  <option value="none">None</option>
                </select>
              </div>

              <div class="d-grid">
                <button
                  type="submit"
                  class="btn btn-primary"
                  [disabled]="profileForm.invalid || saving"
                >
                  @if (saving) {
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                  }
                  Update Profile
                </button>
              </div>
            </form>
          </div>
        </div>
      }
    </div>
  </div>
</div>
